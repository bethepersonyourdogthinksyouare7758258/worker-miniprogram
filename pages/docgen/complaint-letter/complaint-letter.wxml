<view class="page-container">
  <!-- å¤´éƒ¨åŒºåŸŸ -->
  <view class="header-section">
    <navigator url="../docgen-list/docgen-list" class="back-button-wrapper">
      <view class="back-button">
        <text class="back-icon">â†</text>
        <text class="back-text">è¿”å›</text>
      </view>
    </navigator>
    <view class="title-area">
      <text class="page-title">{{title}}</text>
      <view class="help-hint">
        <view class="hint-text">
          <text>ğŸ’¡ æ¸©é¦¨æç¤º</text>
          <text>
åŠ³åŠ¨ç›‘å¯ŸæŠ•è¯‰ä¹¦æ˜¯å‘åŠ³åŠ¨ä¿éšœç›‘å¯Ÿéƒ¨é—¨ä¸¾æŠ¥ç”¨äººå•ä½è¿ååŠ³åŠ¨æ³•å¾‹æ³•è§„è¡Œä¸ºçš„é‡è¦æ–‡ä¹¦ã€‚è¯·æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©é€‚ç”¨çš„æŠ•è¯‰äº‹é¡¹ï¼Œå¹¶å¡«å†™ç›¸å…³ä¿¡æ¯ã€‚

å‡ºäºç”¨æˆ·ä¿¡æ¯å®‰å…¨å’Œå¹³å°å®¡æŸ¥æœºåˆ¶è€ƒè™‘ï¼Œä¸ªäººæ•æ„Ÿä¿¡æ¯å·²è®¾ç½®ä¸ºé»˜è®¤ä¿¡æ¯ï¼ˆé©¬å¤§å¸…ï¼‰ï¼Œç”¨æˆ·å¯åœ¨ç”Ÿæˆæ–‡ä¹¦åå¤åˆ¶å†…å®¹å¹¶è‡ªè¡Œä¿®æ”¹å¡«å†™çœŸå®ä¿¡æ¯ã€‚
          </text>
        </view>
      </view>
    </view>
  </view>

  <!-- è¡¨å•åŒºåŸŸ -->
  <view class="form-container">
    
    <!-- æŠ•è¯‰äººä¿¡æ¯å¡ç‰‡ -->
    <view class="form-card">
      <view class="card-header">
        <text class="card-icon">ğŸ‘¤</text>
        <text class="card-title">æŠ•è¯‰äººä¿¡æ¯</text>
      </view>
      
      <view class="input-group">
        <text class="input-label">å§“å</text>
        <view class="form-input readonly-field">
          <text>{{formData.complainantName}}</text>
        </view>
      </view>
      
      <view class="input-group">
        <text class="input-label">èº«ä»½è¯å·ç </text>
        <view class="form-input readonly-field">
          <text>{{formData.complainantIdCard}}</text>
        </view>
      </view>
      
      <view class="input-group">
        <text class="input-label">å·¥ä½œå•ä½</text>
        <view class="form-input readonly-field">
          <text>{{formData.complainantWorkUnit}}</text>
        </view>
      </view>
      
      <view class="input-group">
        <text class="input-label">ä½å€</text>
        <view class="form-textarea readonly-field">
          <text>{{formData.complainantAddress}}</text>
        </view>
      </view>
      
      <view class="input-group">
        <text class="input-label">è”ç³»æ–¹å¼</text>
        <view class="form-input readonly-field">
          <text>{{formData.complainantPhone}}</text>
        </view>
      </view>
    </view>

    <!-- è¢«æŠ•è¯‰å•ä½ä¿¡æ¯å¡ç‰‡ -->
    <view class="form-card">
      <view class="card-header">
        <text class="card-icon">ğŸ¢</text>
        <text class="card-title">è¢«æŠ•è¯‰å•ä½ä¿¡æ¯</text>
      </view>
      
      <view class="input-group">
        <text class="input-label">å•ä½åç§°</text>
        <view class="form-input readonly-field">
          <text>{{formData.respondentName}}</text>
        </view>
      </view>
      
      <view class="input-group">
        <text class="input-label">ç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç </text>
        <view class="form-input readonly-field">
          <text>{{formData.respondentCreditCode}}</text>
        </view>
      </view>
      
      <view class="input-group">
        <text class="input-label">ä½å€</text>
        <view class="form-textarea readonly-field">
          <text>{{formData.respondentAddress}}</text>
        </view>
      </view>
      
      <view class="input-group">
        <text class="input-label">è”ç³»ç”µè¯</text>
        <view class="form-input readonly-field">
          <text>{{formData.respondentPhone}}</text>
        </view>
      </view>
    </view>

    <!-- æŠ•è¯‰äº‹é¡¹é€‰æ‹©å¡ç‰‡ -->
    <view class="form-card">
      <view class="card-header">
        <text class="card-icon">ğŸ“‹</text>
        <text class="card-title">æŠ•è¯‰äº‹é¡¹é€‰æ‹©</text>
      </view>
      
      <view class="input-group">
        <text class="input-label">è¯·é€‰æ‹©é€‚ç”¨çš„æŠ•è¯‰äº‹é¡¹ <text class="required-mark">*</text></text>
        <text class="section-subtitle">å¯å¤šé€‰</text>
        
        <view class="selected-items-summary" wx:if="{{selectedItems.length > 0}}">
          <text class="summary-text">âœ… å·²é€‰æ‹© {{selectedItems.length}} é¡¹æŠ•è¯‰äº‹é¡¹</text>
          <view class="selected-list">
            <text class="selected-item" wx:for="{{complaintItems}}" wx:key="id" wx:if="{{item.checked}}">
              â€¢ {{item.label}}
            </text>
          </view>
        </view>
        
        <view class="complaint-options">
          <view class="complaint-item {{item.checked ? 'selected' : ''}}" 
                bindtap="handleComplaintItemSelect" 
                data-item="{{item.id}}"
                wx:for="{{complaintItems}}"
                wx:key="id">
            <view class="custom-checkbox {{item.checked ? 'checked' : ''}}">
              <text class="check-icon" wx:if="{{item.checked}}">âœ“</text>
            </view>
            <text class="complaint-label">{{item.label}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç»Ÿä¸€çš„åŠ¨æ€æŠ•è¯‰ä¿¡æ¯å¡«å†™åŒºåŸŸ -->
    <view class="form-card" wx:if="{{selectedItems.length > 0}}">
      <view class="card-header">
        <text class="card-icon">ğŸ“‹</text>
        <text class="card-title">æŠ•è¯‰ä¿¡æ¯å¡«å†™</text>
      </view>
      
      <!-- æŠ•è¯‰æ—¥æœŸ - å¿…å¡«åŸºç¡€é¡¹ -->
      <view class="input-group">
        <text class="input-label">æŠ•è¯‰æ—¥æœŸ <text class="required-mark">*</text></text>
        <picker class="form-picker" 
                mode="date" 
                value="{{formData.complaintVariables.complaintDate}}" 
                bindchange="handleComplaintDateChange"
                bindtap="handlePickerTap"
                data-variable="complaintDate"
                style="display:block;">
          <view class="picker-content">
            <text>{{formData.complaintVariables.complaintDate || 'è¯·é€‰æ‹©æŠ•è¯‰æ—¥æœŸ'}}</text>
          </view>
        </picker>
      </view>

      <!-- item1ç›¸å…³å­—æ®µ -->
      <block wx:if="{{showItem1Form}}">
        <view class="field-section-header">ğŸ“‹ è§„ç« åˆ¶åº¦è¿æ³•ç›¸å…³ä¿¡æ¯</view>
        <view class="input-group">
          <text class="input-label">è¿æ³•è§„ç« åˆ¶å®šæ—¥æœŸ</text>
          <picker class="form-picker" 
                  mode="date" 
                  value="{{formData.complaintVariables.violationDate}}" 
                  bindchange="handleComplaintDateChange"
                  bindtap="handlePickerTap"
                  data-variable="violationDate"
                  style="display:block;">
            <view class="picker-content">
              <text>{{formData.complaintVariables.violationDate || 'è¯·é€‰æ‹©æ—¥æœŸ'}}</text>
            </view>
          </picker>
        </view>
      </block>

      <!-- item2ç›¸å…³å­—æ®µ -->
      <block wx:if="{{showItem2Form}}">
        <view class="field-section-header">ğŸ“ æœªç­¾åŠ³åŠ¨åˆåŒç›¸å…³ä¿¡æ¯</view>
        <view class="input-group">
          <text class="input-label">å…¥èŒæ—¥æœŸ</text>
          <picker class="form-picker" 
                  mode="date" 
                  value="{{formData.complaintVariables.workStartDate}}" 
                  bindchange="handleComplaintDateChange"
                  bindtap="handlePickerTap"
                  data-variable="workStartDate"
                  style="display:block;">
            <view class="picker-content">
              <text>{{formData.complaintVariables.workStartDate || 'è¯·é€‰æ‹©å…¥èŒæ—¥æœŸ'}}</text>
            </view>
          </picker>
        </view>
        <view class="input-group">
          <text class="input-label">å·¥ä½œå²—ä½</text>
          <input class="form-input" 
                 type="text"
                 placeholder="è¯·è¾“å…¥å·¥ä½œå²—ä½" 
                 value="{{formData.complaintVariables.jobPosition}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="jobPosition" />
        </view>
        <view class="input-group">
          <text class="input-label">æœˆå·¥èµ„ï¼ˆå…ƒï¼‰</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥æœˆå·¥èµ„é‡‘é¢" 
                 value="{{formData.complaintVariables.monthlySalary}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="monthlySalary" />
        </view>
        <view class="input-group">
          <text class="input-label">å·¥ä½œæˆªè‡³æ—¥æœŸ</text>
          <picker class="form-picker" 
                  mode="date" 
                  value="{{formData.complaintVariables.workEndDate}}" 
                  bindchange="handleComplaintDateChange"
                  bindtap="handlePickerTap"
                  data-variable="workEndDate"
                  style="display:block;">
            <view class="picker-content">
              <text>{{formData.complaintVariables.workEndDate || 'è¯·é€‰æ‹©æˆªè‡³æ—¥æœŸ'}}</text>
            </view>
          </picker>
        </view>
        <view class="input-group">
          <text class="input-label">å·¥ä½œæœˆæ•°</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥å·¥ä½œæœˆæ•°" 
                 value="{{formData.complaintVariables.workMonths}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="workMonths" />
        </view>
        <view class="input-group">
          <text class="input-label">äºŒå€å·¥èµ„å·®é¢ï¼ˆå…ƒï¼‰</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥äºŒå€å·¥èµ„å·®é¢" 
                 value="{{formData.complaintVariables.customAmount1}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="customAmount1" />
          <text class="input-hint">ğŸ’¡ æç¤ºï¼šå¯ä½¿ç”¨"åŒå€å·¥èµ„è®¡ç®—å™¨"åŠŸèƒ½è®¡ç®—å‡†ç¡®é‡‘é¢</text>
        </view>
      </block>

      <!-- item3ç›¸å…³å­—æ®µ -->
      <block wx:if="{{showItem3Form}}">
        <view class="field-section-header">ğŸ‘¶ ä½¿ç”¨ç«¥å·¥ç›¸å…³ä¿¡æ¯</view>
        <view class="input-group">
          <text class="input-label">ç«¥å·¥å¹´é¾„</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥ç«¥å·¥å¹´é¾„" 
                 value="{{formData.complaintVariables.childAge}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="childAge" />
        </view>
        <view class="input-group">
          <text class="input-label">ç«¥å·¥å‡ºç”Ÿæ—¥æœŸ</text>
          <picker class="form-picker" 
                  mode="date" 
                  value="{{formData.complaintVariables.customDate1}}" 
                  bindchange="handleComplaintDateChange"
                  data-variable="customDate1">
            <text>{{formData.complaintVariables.customDate1 || 'è¯·é€‰æ‹©å‡ºç”Ÿæ—¥æœŸ'}}</text>
          </picker>
        </view>
      </block>

      <!-- item4ç›¸å…³å­—æ®µ -->
      <block wx:if="{{showItem4Form}}">
        <view class="field-section-header">ğŸ‘© å¥³èŒå·¥ä¿æŠ¤ç›¸å…³ä¿¡æ¯</view>
        <view class="input-group">
          <text class="input-label">æ€€å­•æ—¥æœŸ</text>
          <picker class="form-picker" 
                  mode="date" 
                  value="{{formData.complaintVariables.pregnancyDate}}" 
                  bindchange="handleComplaintDateChange"
                  data-variable="pregnancyDate">
            <text>{{formData.complaintVariables.pregnancyDate || 'è¯·é€‰æ‹©ç¡®è¯Šæ€€å­•æ—¥æœŸ'}}</text>
          </picker>
        </view>
        <view class="input-group">
          <text class="input-label">è¿æ³•è¡Œä¸ºå‘ç”Ÿæ—¥æœŸ</text>
          <picker class="form-picker" 
                  mode="date" 
                  value="{{formData.complaintVariables.violationDate}}" 
                  bindchange="handleComplaintDateChange"
                  data-variable="violationDate">
            <text>{{formData.complaintVariables.violationDate || 'è¯·é€‰æ‹©è¿æ³•æ—¥æœŸ'}}</text>
          </picker>
        </view>
      </block>

      <!-- item5ç›¸å…³å­—æ®µ -->
      <block wx:if="{{showItem5Form}}">
        <view class="field-section-header">â° è¿æ³•åŠ ç­ç›¸å…³ä¿¡æ¯</view>
        <view class="input-group">
          <text class="input-label">è¿æ³•åŠ ç­å¼€å§‹æ—¥æœŸ</text>
          <picker class="form-picker" 
                  mode="date" 
                  value="{{formData.complaintVariables.workStartDate}}" 
                  bindchange="handleComplaintDateChange"
                  data-variable="workStartDate">
            <text>{{formData.complaintVariables.workStartDate || 'è¯·é€‰æ‹©å¼€å§‹æ—¥æœŸ'}}</text>
          </picker>
        </view>
        <view class="input-group">
          <text class="input-label">æ¯æ—¥å»¶é•¿å·¥ä½œæ—¶é—´ï¼ˆå°æ—¶ï¼‰</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥æ¯æ—¥åŠ ç­å°æ—¶æ•°" 
                 value="{{formData.complaintVariables.overtimeHours}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="overtimeHours" />
        </view>
      </block>

      <!-- item6ç›¸å…³å­—æ®µ -->
      <block wx:if="{{showItem6Form}}">
        <view class="field-section-header">ğŸ’° æ‹–æ¬ å·¥èµ„ç›¸å…³ä¿¡æ¯</view>
        <view class="input-group">
          <text class="input-label">æ‹–æ¬ å·¥èµ„èµ·å§‹æœˆ</text>
          <picker class="form-picker" 
                  mode="date" 
                  fields="month"
                  value="{{formData.complaintVariables.workStartDate}}" 
                  bindchange="handleComplaintDateChange"
                  data-variable="workStartDate">
            <text>{{formData.complaintVariables.workStartDate || 'è¯·é€‰æ‹©èµ·å§‹æœˆ'}}</text>
          </picker>
        </view>
        <view class="input-group">
          <text class="input-label">æ‹–æ¬ å·¥èµ„æˆªè‡³æœˆ</text>
          <picker class="form-picker" 
                  mode="date" 
                  fields="month"
                  value="{{formData.complaintVariables.workEndDate}}" 
                  bindchange="handleComplaintDateChange"
                  data-variable="workEndDate">
            <text>{{formData.complaintVariables.workEndDate || 'è¯·é€‰æ‹©æˆªè‡³æœˆ'}}</text>
          </picker>
        </view>
        <view class="input-group">
          <text class="input-label">æ‹–æ¬ å·¥èµ„æ€»é¢ï¼ˆå…ƒï¼‰</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥æ‹–æ¬ å·¥èµ„æ€»é¢" 
                 value="{{formData.complaintVariables.owedSalary}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="owedSalary" />
        </view>
        <view class="input-group">
          <text class="input-label">æœˆå‡å·¥èµ„ï¼ˆå…ƒï¼‰</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥æœˆå‡å·¥èµ„" 
                 value="{{formData.complaintVariables.monthlySalary}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="monthlySalary" />
        </view>
        <view class="input-group">
          <text class="input-label">å½“åœ°æœ€ä½å·¥èµ„æ ‡å‡†ï¼ˆå…ƒï¼‰</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥æœ€ä½å·¥èµ„æ ‡å‡†" 
                 value="{{formData.complaintVariables.minimumWage}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="minimumWage" />
        </view>
        <view class="input-group">
          <text class="input-label">ä½äºæœ€ä½å·¥èµ„å·®é¢ï¼ˆå…ƒï¼‰</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥å·®é¢" 
                 value="{{formData.complaintVariables.customAmount1}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="customAmount1" />
        </view>
      </block>

      <!-- item7ç›¸å…³å­—æ®µ -->
      <block wx:if="{{showItem7Form}}">
        <view class="field-section-header">ğŸ›¡ï¸ ç¤¾ä¿ç¼´çº³ç›¸å…³ä¿¡æ¯</view>
        <view class="input-group">
          <text class="input-label">å…¥èŒæ—¥æœŸ</text>
          <picker class="form-picker" 
                  mode="date" 
                  value="{{formData.complaintVariables.workStartDate}}" 
                  bindchange="handleComplaintDateChange"
                  data-variable="workStartDate">
            <text>{{formData.complaintVariables.workStartDate || 'è¯·é€‰æ‹©å…¥èŒæ—¥æœŸ'}}</text>
          </picker>
        </view>
        <view class="input-group">
          <text class="input-label">æˆªæ­¢æ—¥æœŸ</text>
          <picker class="form-picker" 
                  mode="date" 
                  value="{{formData.complaintVariables.workEndDate}}" 
                  bindchange="handleComplaintDateChange"
                  data-variable="workEndDate">
            <text>{{formData.complaintVariables.workEndDate || 'è¯·é€‰æ‹©æˆªæ­¢æ—¥æœŸ'}}</text>
          </picker>
        </view>
      </block>

      <!-- item8ç›¸å…³å­—æ®µ -->
      <block wx:if="{{showItem8Form}}">
        <view class="field-section-header">ğŸ”„ åŠ³åŠ¡æ´¾é£ç›¸å…³ä¿¡æ¯</view>
        <view class="input-group">
          <text class="input-label">æ‹–æ¬ å·¥èµ„èµ·å§‹æœˆ</text>
          <picker class="form-picker" 
                  mode="date" 
                  fields="month"
                  value="{{formData.complaintVariables.workStartDate}}" 
                  bindchange="handleComplaintDateChange"
                  data-variable="workStartDate">
            <text>{{formData.complaintVariables.workStartDate || 'è¯·é€‰æ‹©èµ·å§‹æœˆ'}}</text>
          </picker>
        </view>
        <view class="input-group">
          <text class="input-label">æ‹–æ¬ å·¥èµ„æˆªè‡³æœˆ</text>
          <picker class="form-picker" 
                  mode="date" 
                  fields="month"
                  value="{{formData.complaintVariables.workEndDate}}" 
                  bindchange="handleComplaintDateChange"
                  data-variable="workEndDate">
            <text>{{formData.complaintVariables.workEndDate || 'è¯·é€‰æ‹©æˆªè‡³æœˆ'}}</text>
          </picker>
        </view>
        <view class="input-group">
          <text class="input-label">æ‹–æ¬ å·¥èµ„é‡‘é¢ï¼ˆå…ƒï¼‰</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥æ‹–æ¬ å·¥èµ„é‡‘é¢" 
                 value="{{formData.complaintVariables.owedSalary}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="owedSalary" />
        </view>
      </block>

      <!-- item9ç›¸å…³å­—æ®µ -->
      <block wx:if="{{showItem9Form}}">
        <view class="field-section-header">ğŸ¢ èŒä¸šä»‹ç»è¿æ³•ç›¸å…³ä¿¡æ¯</view>
        <view class="input-group">
          <text class="input-label">æ±‚èŒæ—¥æœŸ</text>
          <picker class="form-picker" 
                  mode="date" 
                  value="{{formData.complaintVariables.violationDate}}" 
                  bindchange="handleComplaintDateChange"
                  data-variable="violationDate">
            <text>{{formData.complaintVariables.violationDate || 'è¯·é€‰æ‹©æ±‚èŒæ—¥æœŸ'}}</text>
          </picker>
        </view>
        <view class="input-group">
          <text class="input-label">æœåŠ¡è´¹ï¼ˆå…ƒï¼‰</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥æ”¶å–çš„æœåŠ¡è´¹" 
                 value="{{formData.complaintVariables.serviceFee}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="serviceFee" />
        </view>
        <view class="input-group">
          <text class="input-label">æ‰¿è¯ºæœˆè–ªï¼ˆå…ƒï¼‰</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥æ‰¿è¯ºçš„æœˆè–ª" 
                 value="{{formData.complaintVariables.monthlySalary}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="monthlySalary" />
        </view>
        <view class="input-group">
          <text class="input-label">å®é™…æœˆè–ªï¼ˆå…ƒï¼‰</text>
          <input class="form-input" 
                 type="number"
                 placeholder="è¯·è¾“å…¥å®é™…æœˆè–ª" 
                 value="{{formData.complaintVariables.customAmount1}}"
                 bindinput="handleComplaintVariableInput"
                 data-variable="customAmount1" />
        </view>
      </block>
    </view>
  </view>

  <!-- æŠ•è¯‰ä¹¦ç”ŸæˆæŒ‰é’® -->
  <view class="button-section">
    <button class="generate-button {{selectedItems.length === 0 ? 'disabled' : ''}}" 
            bindtap="handleGenerateDocument"
            disabled="{{selectedItems.length === 0}}">
      <text wx:if="{{selectedItems.length === 0}}">âš ï¸ è¯·å…ˆé€‰æ‹©æŠ•è¯‰äº‹é¡¹</text>
      <text wx:else>ğŸ“‹ ç”ŸæˆåŠ³åŠ¨ç›‘å¯ŸæŠ•è¯‰ä¹¦</text>
    </button>
  </view>

  <!-- é¢„è§ˆåŒºåŸŸ -->
  <view class="preview-container" wx:if="{{showPreview && documentContent}}">
    <view class="preview-header">
      <text class="preview-title">ğŸ“„ æ–‡ä¹¦é¢„è§ˆ</text>
    </view>
    <view class="document-display">
      <text class="document-text">{{documentContent}}</text>
    </view>
    <view class="action-section">
      <button class="copy-button" bindtap="handleCopyDocument">ğŸ“‹ å¤åˆ¶æ–‡ä¹¦</button>
      <button class="share-button" bindtap="handleShareDocument">ğŸ“¤ åˆ†äº«æ–‡ä¹¦</button>
    </view>
  </view>
</view>

# 劳动监察投诉书页面完整开发计划

## 项目概述
基于微信小程序的劳动监察投诉书生成功能，采用统一动态表单设计，支持9种不同的投诉事项，实现条件化字段显示。

## 核心设计理念
- **统一动态表单**：一个表单区域根据选择动态变化，而非多个分散的表单卡片
- **投诉日期基础项**：永远显示，作为必填的基础信息
- **智能字段显示**：根据用户选择的投诉事项，智能显示对应需要填写的字段
- **绿色视觉反馈**：选中状态使用绿色勾选标记，提供清晰的视觉反馈

## 页面结构设计

### 1. 页面布局
```
┌─────────────────────────┐
│ 头部区域（固定）         │
├─────────────────────────┤
│ 投诉人信息卡片（固定）   │
├─────────────────────────┤
│ 被投诉单位信息卡片（固定）│
├─────────────────────────┤
│ 投诉事项选择卡片         │
│ ├─ 9个可多选投诉项      │
│ └─ 绿色勾选视觉反馈     │
├─────────────────────────┤
│ 统一动态表单区域         │
│ ├─ 投诉日期（必填基础项）│
│ ├─ item1相关字段        │
│ ├─ item2相关字段        │
│ └─ ...                 │
├─────────────────────────┤
│ 生成按钮                │
└─────────────────────────┘
```

### 2. 投诉事项清单

| ID | 投诉事项 | 需要字段 |
|----|---------|----------|
| item1 | 制定的内部劳动保障规章违反劳动法律法规 | 违法规章制定日期 |
| item2 | 未依法与投诉人订立书面劳动合同 | 入职日期、工作岗位、月工资、工作截至日期、工作月数、二倍工资差额 |
| item3 | 违法使用童工 | 童工年龄、童工出生日期 |
| item4 | 违反女职工特殊劳动保护规定 | 怀孕日期、违法行为发生日期 |
| item5 | 违法延长工作时间，侵害劳动者休息休假权利 | 违法加班开始日期、每日延长工作时间（小时） |
| item6 | 拖欠工资且未执行最低工资标准 | 拖欠工资起始月、截至月、拖欠总额、月均工资、最低工资标准、差额 |
| item7 | 未依法为投诉人缴纳社会保险费 | 入职日期、截止日期 |
| item8 | 劳务派遣单位与用工单位违反劳务派遣规定 | 拖欠工资起始月、截至月、拖欠金额 |
| item9 | 违反职业介绍规定，收取高额费用且提供虚假岗位信息 | 求职日期、服务费、承诺月薪、实际月薪 |

## 技术实现方案

### 1. 数据结构设计
```javascript
data: {
  selectedItems: [], // 简化的选中项目数组，用于UI绑定
  formData: {
    // 基础信息
    complainantName: '马大帅',
    complainantIdCard: '210381199001010123',
    complainantWorkUnit: '铁岭维多利亚国际娱乐广场',
    complainantAddress: '辽宁省铁岭市银州区工人街32号',
    complainantPhone: '15640234567',
    
    respondentName: '铁岭维多利亚国际娱乐广场',
    respondentCreditCode: '912112001234567890',
    respondentAddress: '辽宁省铁岭市银州区中央大街188号',
    respondentPhone: '024-87654321',
    
    selectedComplaintItems: [], // 完整的选中数组，用于数据处理
    
    // 动态字段变量
    complaintVariables: {
      complaintDate: '',        // 投诉日期（必填）
      violationDate: '',        // 违法日期
      workStartDate: '',        // 入职日期
      workEndDate: '',          // 工作截至日期
      workMonths: '',           // 工作月数
      jobPosition: '',          // 工作岗位
      monthlySalary: '',        // 月工资
      owedSalary: '',          // 拖欠工资
      minimumWage: '',         // 最低工资标准
      pregnancyDate: '',       // 怀孕日期
      childAge: '',            // 童工年龄
      overtimeHours: '',       // 加班小时数
      serviceFee: '',          // 服务费
      customAmount1: '',       // 自定义金额1
      customDate1: '',         // 自定义日期1
    }
  }
}
```

### 2. 核心功能实现

#### 投诉事项选择处理
```javascript
handleComplaintItemSelect(e) {
  const item = e.currentTarget.dataset.item
  let selectedItems = [...this.data.selectedItems]
  let formSelectedItems = [...this.data.formData.selectedComplaintItems]
  
  const index = selectedItems.indexOf(item)
  if (index > -1) {
    // 取消选择
    selectedItems.splice(index, 1)
    formSelectedItems.splice(formSelectedItems.indexOf(item), 1)
  } else {
    // 添加选择
    selectedItems.push(item)
    formSelectedItems.push(item)
  }
  
  // 同步更新两个数组
  this.setData({
    selectedItems: selectedItems,
    'formData.selectedComplaintItems': formSelectedItems
  })
  
  wx.showToast({
    title: `✨ 已选择 ${selectedItems.length} 项`,
    icon: 'none',
    duration: 1500
  })
}
```

#### 动态表单渲染
```xml
<!-- 统一的动态表单区域 -->
<view class="form-card" wx:if="{{selectedItems.length > 0}}">
  <!-- 投诉日期 - 必填基础项 -->
  <view class="input-group">
    <text class="input-label">投诉日期 <text class="required-mark">*</text></text>
    <picker class="form-picker" mode="date" value="{{formData.complaintVariables.complaintDate}}" 
            bindchange="handleComplaintDateChange" data-variable="complaintDate">
      <text>{{formData.complaintVariables.complaintDate || '请选择投诉日期'}}</text>
    </picker>
  </view>

  <!-- 条件字段渲染 -->
  <block wx:if="{{selectedItems.indexOf('item1') > -1}}">
    <view class="field-section-header">📋 规章制度违法相关信息</view>
    <!-- 具体字段... -->
  </block>
  
  <!-- 其他条件字段... -->
</view>
```

### 3. 样式设计要点

#### 绿色勾选标记
```css
.check-icon {
  font-size: 24rpx;
  color: #28a745; /* 专业绿色 */
  font-weight: bold;
  line-height: 1;
  display: block;
}
```

#### 动态表单分组头部
```css
.field-section-header {
  font-size: 28rpx;
  font-weight: 600;
  color: #E6A23C;
  margin: 40rpx 0 20rpx;
  padding: 15rpx 20rpx;
  background: linear-gradient(135deg, rgba(230, 162, 60, 0.1) 0%, rgba(245, 108, 108, 0.05) 100%);
  border-radius: 12rpx;
  border-left: 4rpx solid #E6A23C;
  display: flex;
  align-items: center;
  box-shadow: 0 2rpx 8rpx rgba(230, 162, 60, 0.15);
}
```

## 文书生成模板

### 投诉书基本格式
```
劳动监察投诉书

投诉人：[投诉人姓名]
身份证号码：[身份证号]
工作单位：[工作单位]
住址：[详细住址]
联系方式：[联系电话]

被投诉人单位名称：[公司名称]
统一社会信用代码：[信用代码]
住址：[公司地址]
联系电话：[公司电话]

投诉事项：
[根据用户选择生成对应的投诉内容]

此致
[被投诉单位所在地]劳动保障监察大队

投诉人：[投诉人签名]
日期：[投诉日期]
```

### 各投诉事项模板示例

#### item1 - 规章制度违法
```
### 1. 制定的内部劳动保障规章违反劳动法律法规
**事实与理由**：被投诉单位于[违法规章制定日期]制定的《员工手册》中第XX条规定"员工加班不得要求支付加班费"，该规定违反《中华人民共和国劳动法》第四十四条关于加班费支付的规定，侵害了劳动者的合法权益。

**投诉请求**：请求劳动保障监察部门责令被投诉单位修改违法规章制度，纠正违法行为。

**附件**：单位《员工手册》复印件、本人劳动合同复印件
```

#### item2 - 未签劳动合同
```
### 2. 未依法与投诉人订立书面劳动合同
**事实与理由**：投诉人于[入职日期]入职被投诉单位，担任[工作岗位]岗位，月工资[月工资]元。截至[工作截至日期]，已工作[工作月数]个月，但被投诉单位始终未与本人订立书面劳动合同，违反《劳动合同法》第十条关于"建立劳动关系，应当订立书面劳动合同"的规定。

**投诉请求**：请求劳动保障监察部门责令被投诉单位立即与投诉人补订书面劳动合同，并依《劳动合同法》第八十二条支付未订立劳动合同的二倍工资差额[二倍工资差额]元。

💡 **计算器提示**：可使用小程序内"双倍工资计算器"功能精确计算二倍工资差额。

**附件**：工资银行流水、工作证复印件、考勤表
```

## 开发优势

### 1. 用户体验优化
- **逻辑清晰**：统一表单区域，避免多个分散卡片造成的混乱
- **高效填写**：根据选择智能显示字段，避免无关信息干扰
- **视觉反馈**：绿色勾选标记，清晰表示选中状态
- **分组明确**：每类字段有专门的分组头部，便于理解

### 2. 技术架构优势
- **数据一致性**：双重数据同步，确保UI和业务逻辑的一致性
- **扩展性强**：新增投诉事项只需配置字段映射即可
- **维护性好**：统一的表单组件，便于维护和更新
- **性能优化**：条件渲染减少DOM节点，提高渲染性能

### 3. 法律专业性
- **模板标准**：基于真实劳动监察投诉书格式设计
- **法条引用**：准确引用相关法律条文
- **计算器集成**：提示用户使用专业计算器功能
- **附件提示**：指导用户准备必要的证据材料

## 部署检查清单

### 文件清单
- [x] `pages/docgen/docgen-form/docgen-form.wxml` - 页面结构
- [x] `pages/docgen/docgen-form/docgen-form.wxss` - 样式定义  
- [x] `pages/docgen/docgen-form/docgen-form.js` - 逻辑处理
- [x] `pages/docgen/docgen-form/docgen-form.json` - 页面配置

### 功能测试
- [x] 投诉事项多选功能
- [x] 绿色勾选视觉反馈
- [x] 动态表单字段显示
- [x] 投诉日期必填验证
- [x] 文书内容生成
- [x] 复制分享功能

### 兼容性测试
- [x] 微信小程序环境
- [x] iOS设备适配
- [x] Android设备适配
- [x] 不同屏幕尺寸

## 项目总结

本项目成功实现了基于动态条件表单的劳动监察投诉书生成功能，通过统一的表单设计和智能的字段显示，大大提升了用户体验和操作效率。绿色勾选反馈和专业的法律文书模板，确保了产品的专业性和可用性。

整个系统具有良好的扩展性和维护性，为后续功能扩展和优化奠定了坚实基础。
